---
title: 使用活动源 REST API
description: '您可以使用的活动源 API 在 Microsoft Graph 中恢复用户的活动设备和平台。 代表用户通过委派的权限和用户活动权限，可用于个人或工作和学校帐户执行活动订阅源的 API 请求。 '
localization_priority: Normal
ms.prod: project-rome
ms.openlocfilehash: 00b1ac90bd4a1a9fe7cef2a9ffaebcebc2d8d5f4
ms.sourcegitcommit: d95f6d39a0479da6e531f3734c4029dc596b9a3f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/30/2019
ms.locfileid: "29641069"
---
# <a name="use-the-activity-feed-rest-api"></a><span data-ttu-id="9482a-104">使用活动源 REST API</span><span class="sxs-lookup"><span data-stu-id="9482a-104">Use the activity feed REST API</span></span>

<span data-ttu-id="9482a-105">您可以使用的活动源 API 在 Microsoft Graph 中恢复用户的活动设备和平台。</span><span class="sxs-lookup"><span data-stu-id="9482a-105">You can use the activity feed API in Microsoft Graph to resume a user's activity across devices and platforms.</span></span> <span data-ttu-id="9482a-106">代表用户通过[委派权限](/graph/permissions-reference#delegated-permissions-application-permissions-and-effective-permissions)和[用户活动权限](/graph/permissions-reference)，可用于与个人或工作和学校帐户执行活动订阅源的 API 请求。</span><span class="sxs-lookup"><span data-stu-id="9482a-106">Activity feed API requests are performed on behalf of a user via [delegated permissions](/graph/permissions-reference#delegated-permissions-application-permissions-and-effective-permissions) and the [user activity permission](/graph/permissions-reference), which can be used with either personal or work and school accounts.</span></span> 

<span data-ttu-id="9482a-107">用户活动由[活动](https://developer.microsoft.com/graph/docs/api-reference/v1.0/resources/projectrome_activity)资源和组织中的基于时间的源表示在集合中的我 / 活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-107">User activities are represented by the [activity](https://developer.microsoft.com/graph/docs/api-reference/v1.0/resources/projectrome_activity) resource and are organized in a time-based feed represented by the collection me/activities.</span></span> 
<!-- Add missing content.
Each activity represents a unique... 
-->
## <a name="what-makes-a-great-user-activity"></a><span data-ttu-id="9482a-108">什么使很好的用户活动？</span><span class="sxs-lookup"><span data-stu-id="9482a-108">What makes a great user activity?</span></span>

<span data-ttu-id="9482a-109">用户活动不只是启动应用程序 — 它们是深入到您的应用程序中的特定内容的链接。</span><span class="sxs-lookup"><span data-stu-id="9482a-109">User activities don’t just launch apps — they are deep links into specific content within your app.</span></span> <span data-ttu-id="9482a-110">您创建的用户活动不仅可在您自己的应用程序，但也将显示在 Cortana 和 Windows 时间线 — 推动多个应用程序 reengagement 和简化您的用户可以继续使用多个设备的应用程序。</span><span class="sxs-lookup"><span data-stu-id="9482a-110">The user activities you create can not only be used in your own app, but will also appear in Cortana and Windows Timeline — driving more app reengagement and making it easier for your users to continue using your app across multiple devices.</span></span>  

### <a name="what-should-become-an-activity"></a><span data-ttu-id="9482a-111">什么应成为活动？</span><span class="sxs-lookup"><span data-stu-id="9482a-111">What should become an activity?</span></span> 

<span data-ttu-id="9482a-112">由于每个应用程序不同，这取决于每个应用程序开发人员了解将映射到用户活动应用程序中的操作的最佳方式。</span><span class="sxs-lookup"><span data-stu-id="9482a-112">Because every app is different, it's up to each app developer to understand the best way to map actions within your application to user activities.</span></span> <span data-ttu-id="9482a-113">例如，游戏可能创建活动的每个市场活动、 文档创作应用程序可能会创建每个唯一的文档，活动和业务线应用程序可能会创建每个工作流活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-113">For example, games might create an activity for each campaign, document authoring apps might create an activity for each unique document, and line-of-business apps might create an activity for each workflow.</span></span> 

<span data-ttu-id="9482a-114">在您的应用程序中定义 activitites 应用以下准则：</span><span class="sxs-lookup"><span data-stu-id="9482a-114">Apply the following guidlines as you define activitites in your app:</span></span>

<span data-ttu-id="9482a-115">**执行操作：** 记录一组相关的用户操作的单个活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-115">**DO:** Record a single activity for a group of related user actions.</span></span> <span data-ttu-id="9482a-116">如果您的应用程序用于序列的相关内容，可能有意义的整个项目会话记录的单个活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-116">If your application is used for a sequence of related content, it probably makes sense to record a single activity for the entire engagement session.</span></span>  

<span data-ttu-id="9482a-117">*播放列表方案：* 这是音乐播放列表或 TV 显示密切相关 — 单个用户活动可以更新以显示您的进度。</span><span class="sxs-lookup"><span data-stu-id="9482a-117">*Playlist scenarios:* This is especially relevant for music playlists or TV shows — a single user activity can be updated to show your progress.</span></span> <span data-ttu-id="9482a-118">在这种情况下，您将拥有多个[历史记录项](https://developer.microsoft.com/graph/docs/api-reference/v1.0/resources/projectrome_historyitem)的项目的时间段代表跨多个天或数周单个用户活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-118">In this case, you will have a single user activity with multiple [history items](https://developer.microsoft.com/graph/docs/api-reference/v1.0/resources/projectrome_historyitem) representing periods of engagement across multiple days or weeks.</span></span>  

<span data-ttu-id="9482a-119">**执行操作：** 存储到云中的用户数据。</span><span class="sxs-lookup"><span data-stu-id="9482a-119">**DO:** Store user data to the cloud.</span></span> <span data-ttu-id="9482a-120">如果您想要支持跨设备活动，您需要确保所需 reengage 此活动的内容存储到云位置。</span><span class="sxs-lookup"><span data-stu-id="9482a-120">If you want to support cross-device activities, you need to make sure the content required to reengage this activity is stored to a cloud location.</span></span> <span data-ttu-id="9482a-121">例如，如果用户在编辑文档的每次发布活动时，文档应存储在云中而不是用户的设备上的本地以启用跨设备 reengagement。</span><span class="sxs-lookup"><span data-stu-id="9482a-121">For example, if you publish an activity each time a user edits a document, the document should be stored in the cloud as opposed to locally on the user's device in order to enable cross-device reengagement.</span></span>  

<span data-ttu-id="9482a-122">**不：** 创建用户活动用户无需继续将来的操作。</span><span class="sxs-lookup"><span data-stu-id="9482a-122">**DO NOT:** Create a user activity for actions that users do not need to resume in the future.</span></span> <span data-ttu-id="9482a-123">如果您的应用程序用于完成简单、 一次性不会保留，用于在将来跟踪状态的操作，您可能不需要写入用户活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-123">If your application is used to complete simple, one-time operations that do not persist status for you to track in the future, you probably do not need to write a user activity.</span></span> 

<span data-ttu-id="9482a-124">要清除，即使用户活动显示在 Windows 日程表，这不是作为版本控制工具 — 选择基于文档的活动应始终显示的最新版本的文档 （包括由其他用户所做的更改）。</span><span class="sxs-lookup"><span data-stu-id="9482a-124">To be clear, even though user activities appear in Windows Timeline, this is not designed as a versioning tool — choosing a document-based activity should always show the latest version of that document (including changes that were made by another user.)</span></span>

<span data-ttu-id="9482a-125">**不：** 创建用户活动完成由*其他用户*的操作。</span><span class="sxs-lookup"><span data-stu-id="9482a-125">**DO NOT:** Create a user activity for actions completed by *other users*.</span></span> <span data-ttu-id="9482a-126">如果某人发送用户的消息或 @mentions 用户在您的应用程序，您不应编写新活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-126">If someone sends the user a message, or @mentions the user within your app, you should not write a new activity.</span></span> <span data-ttu-id="9482a-127">这些交互更好地构成显示通知。</span><span class="sxs-lookup"><span data-stu-id="9482a-127">These interactions are better served by surfacing notifications.</span></span>  

<span data-ttu-id="9482a-128">*的协作方案：* 如果多人正在使用同一个活动 （如 Word 文档），将会情况下当另一个用户所做更改文档后最后一个编辑它。</span><span class="sxs-lookup"><span data-stu-id="9482a-128">*Collaboration scenarios:* If multiple people are working on the same activity (such as a Word document), there will be cases when another user has made changes to the document after you last edited it.</span></span> <span data-ttu-id="9482a-129">在这种情况下，应用程序开发人员可能要更新的可视元素中活动的以反映对文档进行更改。</span><span class="sxs-lookup"><span data-stu-id="9482a-129">In this case, app developers might want to update the visual elements in the activity to reflect changes made to the document.</span></span> <span data-ttu-id="9482a-130">若要执行此操作，应用程序可能不创建新的历史记录项更新现有的活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-130">To do this, the app might update the existing activity without creating a new history item.</span></span> 

><span data-ttu-id="9482a-131">**注意：** 如果您发布 web 应用程序的活动，请务必同时包括`activationURL`和`fallbackURL`您的活动的每个。</span><span class="sxs-lookup"><span data-stu-id="9482a-131">**Note:** If you're publishing activities for a web application, it's important to include both an `activationURL` and a `fallbackURL` for each of your activities.</span></span> <span data-ttu-id="9482a-132">活动将回您的应用程序启动用户，按预期方式从 Microsoft Windows 日程表类似的体验。</span><span class="sxs-lookup"><span data-stu-id="9482a-132">The activities will launch the user back into your app as expected from Microsoft experiences like Windows Timeline.</span></span> 

## <a name="app-interaction-patterns-and-user-activities"></a><span data-ttu-id="9482a-133">应用程序交互模式和用户活动</span><span class="sxs-lookup"><span data-stu-id="9482a-133">App interaction patterns and user activities</span></span> 
<span data-ttu-id="9482a-134">您创建的用户活动取决于您的应用程序的交互模式。</span><span class="sxs-lookup"><span data-stu-id="9482a-134">The user activities that you create will vary based on the interaction pattern of your app.</span></span> <span data-ttu-id="9482a-135">不同每个应用程序时，大多数将分为以下交互模式之一：</span><span class="sxs-lookup"><span data-stu-id="9482a-135">While every app is different, most will fall into one of the following interaction patterns:</span></span> 

* <span data-ttu-id="9482a-136">**基于文档的应用程序**— 这就反映了使用时段的一个或多个历史记录具有创建每个文档的一个活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-136">**Document-based apps** — Create one activity per document with one or more history records reflecting periods of use.</span></span> <span data-ttu-id="9482a-137">非常重要更新活动卡，如对文档进行更改。</span><span class="sxs-lookup"><span data-stu-id="9482a-137">It is important to update your activity card as changes are made to the document.</span></span> 
* <span data-ttu-id="9482a-138">**媒体播放应用程序**— 创建的内容，例如播放列表、 程序或独立内容的逻辑分组每一个活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-138">**Media playback apps** — Create one activity per logical grouping of content such as a playlist, program, or standalone content.</span></span> 
* <span data-ttu-id="9482a-139">**游戏**— 游戏或打造为每保存创建一个活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-139">**Games** — Create one activity for each saved game or world.</span></span> <span data-ttu-id="9482a-140">如果您的游戏支持单个序列的级别，您可以随时间推移，编写同一个活动，但您可能要更新您的卡片显示您最新的进度或成绩。</span><span class="sxs-lookup"><span data-stu-id="9482a-140">If your game supports only a single sequence of levels, you can write the same activity over time, although you might want to update your card to show your latest progress or achievements.</span></span> 
* <span data-ttu-id="9482a-141">**实用程序应用程序**— 如果没有任何应用程序的用户将想要恢复中，您不能发布活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-141">**Utility apps** — If there is nothing within your app that users would want to resume, you should not publish activities.</span></span> <span data-ttu-id="9482a-142">较好的示例是一个简单的单一用途应用程序，如计算器。</span><span class="sxs-lookup"><span data-stu-id="9482a-142">A good example is a simple single-purpose app like calculator.</span></span> 
* <span data-ttu-id="9482a-143">**业务线应用程序**— 用于管理简单任务或工作流存在多个应用程序。</span><span class="sxs-lookup"><span data-stu-id="9482a-143">**Line-of-business apps** — Many apps exist for managing simple tasks or workflows.</span></span> <span data-ttu-id="9482a-144">创建一个通过您的应用程序访问每个单独的工作流活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-144">Create one activity for each separate workflow accessed through your app.</span></span> <span data-ttu-id="9482a-145">例如，每个费用报表应为单独的活动，因为您可能希望单击以查看是否它已批准的活动。</span><span class="sxs-lookup"><span data-stu-id="9482a-145">For example, each expense report would be a separate activity, because you might want to click that activity to see if it was approved.</span></span>

<span data-ttu-id="9482a-146">*某些复杂的应用程序包括多个交互模式。您可能需要关注的处理您的应用程序的不同方案的不同用户活动创建模式。*</span><span class="sxs-lookup"><span data-stu-id="9482a-146">*Some complex apps include multiple interaction patterns. You might want to follow different user activity creation patterns for different scenarios handled by your app.*</span></span>

<!-- Add content or remove H2.
## Common use cases 
-->

## <a name="next-steps"></a><span data-ttu-id="9482a-147">后续步骤</span><span class="sxs-lookup"><span data-stu-id="9482a-147">Next steps</span></span>

- <span data-ttu-id="9482a-148">请参阅[活动资源](https://developer.microsoft.com/graph/docs/api-reference/v1.0/resources/projectrome_activity)，并定义您的应用程序的活动，以帮助用户继续重要任务。</span><span class="sxs-lookup"><span data-stu-id="9482a-148">See the [activity resource](https://developer.microsoft.com/graph/docs/api-reference/v1.0/resources/projectrome_activity) and define your app's activities to help users resume important tasks.</span></span>
- <span data-ttu-id="9482a-149">浏览的信息，以使您活动**pop**[自适应卡示例](https://adaptivecards.io/samples/)示例。</span><span class="sxs-lookup"><span data-stu-id="9482a-149">Explore the [adaptive card samples](https://adaptivecards.io/samples/) samples for ideas to make your activities **pop**.</span></span>  
- <span data-ttu-id="9482a-150">尝试 [Graph 浏览器](https://developer.microsoft.com/graph/graph-explorer)中的 API。</span><span class="sxs-lookup"><span data-stu-id="9482a-150">Try the API in the [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer).</span></span>

<span data-ttu-id="9482a-151">**寻找相关详细信息？**</span><span class="sxs-lookup"><span data-stu-id="9482a-151">**Looking for more ideas?**</span></span> 

- <span data-ttu-id="9482a-152">请参阅[Microsoft 的体验如何使用活动](https://channel9.msdn.com/events/Build/2017/B8108)。</span><span class="sxs-lookup"><span data-stu-id="9482a-152">See [how Microsoft experiences are using activities](https://channel9.msdn.com/events/Build/2017/B8108).</span></span>
- <span data-ttu-id="9482a-153">了解[活动源 API 和拿起回忆其中](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011)。</span><span class="sxs-lookup"><span data-stu-id="9482a-153">Learn about [the activity feed API and pick up where I left off](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).</span></span>
