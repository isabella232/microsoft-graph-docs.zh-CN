# <a name="use-the-activity-feed-rest-api"></a><span data-ttu-id="3c841-101">使用活动源 REST API</span><span class="sxs-lookup"><span data-stu-id="3c841-101">Use the activity feed REST API</span></span>

<span data-ttu-id="3c841-102">您可以使用的活动源 API 在 Microsoft Graph 中恢复用户在设备和平台上的活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-102">You can use the activity feed API in Microsoft Graph to resume a user's actiity across devices and platforms.</span></span> <span data-ttu-id="3c841-103">活动源 API 请求代表用户通过 [委派权限](../../../concepts/permissions_reference.md#delegated-permissions-application-permissions-and-effective-permissions)和[用户活动权限](../../../concepts/permissions_reference.md)执行，可用于个人或工作和学校帐户。</span><span class="sxs-lookup"><span data-stu-id="3c841-103">Activity feed API requests are performed on behalf of a user via [delegated permissions](../../../concepts/permissions_reference.md#delegated-permissions-application-permissions-and-effective-permissions) and the [user activity permission](../../../concepts/permissions_reference.md), which can be used with either personal or work and school accounts.</span></span> 

<span data-ttu-id="3c841-104">用户活动由 [activity](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) 资源表示，以基于时间且以集合中的 me/activities 表示的源来组织。</span><span class="sxs-lookup"><span data-stu-id="3c841-104">User activities are represented by the [activity](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) resource and are organized in a time-based feed represented by the collection me/activities.</span></span> 
<!-- Add missing content.
Each activity represents a unique... 
-->
## <a name="what-makes-a-great-user-activity"></a><span data-ttu-id="3c841-105">什么是构成好的用户活动的因素？</span><span class="sxs-lookup"><span data-stu-id="3c841-105">What makes a great user activity?</span></span>

<span data-ttu-id="3c841-106">用户活动不只是启动应用程序——它们是深入到您的应用程序中的特定内容的链接。</span><span class="sxs-lookup"><span data-stu-id="3c841-106">User activities don’t just launch apps — they are deep links into specific content within your app.</span></span> <span data-ttu-id="3c841-107">您创建的用户活动不仅可用于您自己的应用程序，也将显示在 Cortana 和 Windows 时间线中，从而推动更多的应用程序后续互动，并让用户可以继续在多个设备上使用您的应用程序。</span><span class="sxs-lookup"><span data-stu-id="3c841-107">The user activities you create can not only be used in your own app, but will also appear in Cortana and Windows Timeline — driving more app reengagement and making it easier for your users to continue using your app across multiple devices.</span></span>  

### <a name="what-should-become-an-activity"></a><span data-ttu-id="3c841-108">什么应成为活动？</span><span class="sxs-lookup"><span data-stu-id="3c841-108">What should become an activity?</span></span> 

<span data-ttu-id="3c841-109">由于每个应用程序都不同，每个应用程序开发人员应了解将用户活动映射到应用程序中的操作的最佳方式。</span><span class="sxs-lookup"><span data-stu-id="3c841-109">Because every app is different, it's up to each app developer to understand the best way to map actions within your application to user activities.</span></span> <span data-ttu-id="3c841-110">例如，游戏可能为每个关卡创建活动、文档创作应用程序可能会为每个唯一的文档创建活动，业务线应用程序可能会为每个工作流创建活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-110">For example, games might create an activity for each campaign, document authoring apps might create an activity for each unique document, and line-of-business apps might create an activity for each workflow.</span></span> 

<span data-ttu-id="3c841-111">在应用程序中定义活动时请应用以下准则：</span><span class="sxs-lookup"><span data-stu-id="3c841-111">Apply the following guidlines as you define activitites in your app:</span></span>

<span data-ttu-id="3c841-112">**建议：** 为一组相关的用户操作记录单个活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-112">**DO:** Record a single activity for a group of related user actions.</span></span> <span data-ttu-id="3c841-113">如果您的应用程序用于相关内容的序列，可能将整个交互会话记录为单个活动比较合理。</span><span class="sxs-lookup"><span data-stu-id="3c841-113">If your application is used for a sequence of related content, it probably makes sense to record a single activity for the entire engagement session.</span></span>  

<span data-ttu-id="3c841-114">*播放列表方案：* 这与音乐播放列表或电视节目密切相关，可更新单个用户活动以显示您的进度。</span><span class="sxs-lookup"><span data-stu-id="3c841-114">*Playlist scenarios:* This is especially relevant for music playlists or TV shows — a single user activity can be updated to show your progress.</span></span> <span data-ttu-id="3c841-115">在这种情况下，您的单个用户活动将拥有多个[历史记录项](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_historyitem)，它们代表跨多天或数周的交互时间段。</span><span class="sxs-lookup"><span data-stu-id="3c841-115">In this case, you will have a single user activity with multiple [history items](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_historyitem) representing periods of engagement across multiple days or weeks.</span></span>  

<span data-ttu-id="3c841-116">**建议：** 存储用户数据到云中。</span><span class="sxs-lookup"><span data-stu-id="3c841-116">**DO:** Store user data to the cloud.</span></span> <span data-ttu-id="3c841-117">如果您想要支持跨设备活动，需要确保将后续开展此活动所需的内容存储到云端。</span><span class="sxs-lookup"><span data-stu-id="3c841-117">If you want to support cross-device activities, you need to make sure the content required to reengage this activity is stored to a cloud location.</span></span> <span data-ttu-id="3c841-118">例如，如果在用户每次编辑文档时发布一个活动，文档应存储在云中而不是用户设备上的本地位置，以支持跨设备后续开展互动。</span><span class="sxs-lookup"><span data-stu-id="3c841-118">For example, if you publish an activity each time a user edits a document, the document should be stored in the cloud as opposed to locally on the user's device in order to enable cross-device reengagement.</span></span>  

<span data-ttu-id="3c841-119">**不建议：** 为用户无需将来继续的操作创建用户活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-119">**DO NOT:** Create a user activity for actions that users do not need to resume in the future.</span></span> <span data-ttu-id="3c841-120">如果应用程序用于完成不会维持状态以用于将来跟踪的简单、一次性操作，可能不需要写入用户活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-120">If your application is used to complete simple, one-time operations that do not persist status for you to track in the future, you probably do not need to write a user activity.</span></span> 

<span data-ttu-id="3c841-121">为说明问题，即使用户活动显示在 Windows 日程表，这不是作为版本控制工具——选择基于文档的活动应始终显示最新版本的文档 （包括由其他用户所做的更改）。</span><span class="sxs-lookup"><span data-stu-id="3c841-121">To be clear, even though user activities appear in Windows Timeline, this is not designed as a versioning tool — choosing a document-based activity should always show the latest version of that document (including changes that were made by another user.)</span></span>

<span data-ttu-id="3c841-122">**不建议：** 为由*其他用户*完成的操作创建用户活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-122">**DO NOT:** Create a user activity for actions completed by *other users*.</span></span> <span data-ttu-id="3c841-123">如果某人在您的应用程序 中向用户发送消息或以 @ 提及用户，您不应编写新活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-123">If someone sends the user a message, or @mentions the user within your app, you should not write a new activity.</span></span> <span data-ttu-id="3c841-124">这些交互可通过显示通知来更好地满足需求。</span><span class="sxs-lookup"><span data-stu-id="3c841-124">These interactions are better served by surfacing notifications.</span></span>  

<span data-ttu-id="3c841-125">*协作方案：* 如果多人正在使用同一个活动 （如 Word 文档），将会存在您最后编辑后又有另一个用户对其更改的情况。</span><span class="sxs-lookup"><span data-stu-id="3c841-125">*Collaboration scenarios:* If multiple people are working on the same activity (such as a Word document), there will be cases when another user has made changes to the document after you last edited it.</span></span> <span data-ttu-id="3c841-126">在这种情况下，应用程序开发人员可能要更新活动中的可视元素，以反映对文档进行的更改。</span><span class="sxs-lookup"><span data-stu-id="3c841-126">In this case, app developers might want to update the visual elements in the activity to reflect changes made to the document.</span></span> <span data-ttu-id="3c841-127">若要执行此操作，应用程序可能更新现有的活动而不创建新的历史记录项。</span><span class="sxs-lookup"><span data-stu-id="3c841-127">To do this, the app might update the existing activity without creating a new history item.</span></span> 

><span data-ttu-id="3c841-128">**注意：** 如果您发布 Web 应用程序的活动，请务必同时在您的每个活动包括 `activationURL` 和 `fallbackURL`。</span><span class="sxs-lookup"><span data-stu-id="3c841-128">**Note:** If you're publishing activities for a web application, it's important to include both an `activationURL` and a `fallbackURL` for each of your activities.</span></span> <span data-ttu-id="3c841-129">活动将按预期方式将用户从类似于 Windows 日程表的 Microsoft 体验中启动回您的应用程序。</span><span class="sxs-lookup"><span data-stu-id="3c841-129">The activities will launch the user back into your app as expected from Microsoft experiences like Windows Timeline.</span></span> 

## <a name="app-interaction-patterns-and-user-activities"></a><span data-ttu-id="3c841-130">应用程序交互模式和用户活动</span><span class="sxs-lookup"><span data-stu-id="3c841-130">App interaction patterns and user activities</span></span> 
<span data-ttu-id="3c841-131">您创建的用户活动取决于应用程序的交互模式。</span><span class="sxs-lookup"><span data-stu-id="3c841-131">The user activities that you create will vary based on the interaction pattern of your app.</span></span> <span data-ttu-id="3c841-132">虽然每个应用程序均有所不同，但大多数将归为以下交互模式之一：</span><span class="sxs-lookup"><span data-stu-id="3c841-132">While every app is different, most will fall into one of the following interaction patterns:</span></span> 

* <span data-ttu-id="3c841-133">**基于文档的应用程序**——为每个文档创建一个活动，以一个或多个历史记录反映使用的时段。</span><span class="sxs-lookup"><span data-stu-id="3c841-133">**Document-based apps** — Create one activity per document with one or more history records reflecting periods of use.</span></span> <span data-ttu-id="3c841-134">重要的是，如对文档进行了更改，需要更新活动卡。</span><span class="sxs-lookup"><span data-stu-id="3c841-134">It is important to update your activity card as changes are made to the document.</span></span> 
* <span data-ttu-id="3c841-135">**媒体播放应用程序**——针对每一组逻辑内容组合创建活动，例如播放列表、程序或独立内容。</span><span class="sxs-lookup"><span data-stu-id="3c841-135">**Media playback apps** — Create one activity per logical grouping of content such as a playlist, program, or standalone content.</span></span> 
* <span data-ttu-id="3c841-136">**游戏**——为每次保存的游戏或打造的场景创建一个活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-136">**Games** — Create one activity for each saved game or world.</span></span> <span data-ttu-id="3c841-137">如果您的游戏支持单个序列的级别，可以随时间推移而写入同一个活动，但您可能要更新您的卡片显示您最新的进度或成绩。</span><span class="sxs-lookup"><span data-stu-id="3c841-137">If your game supports only a single sequence of levels, you can write the same activity over time, although you might want to update your card to show your latest progress or achievements.</span></span> 
* <span data-ttu-id="3c841-138">**实用程序**——如果应用程序 中没有任何用户想要恢复的内容，不应发布活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-138">**Utility apps** — If there is nothing within your app that users would want to resume, you should not publish activities.</span></span> <span data-ttu-id="3c841-139">较好的示例是一个简单的单一用途应用程序，如计算器。</span><span class="sxs-lookup"><span data-stu-id="3c841-139">A good example is a simple single-purpose app like calculator.</span></span> 
* <span data-ttu-id="3c841-140">**业务线应用程序**——用于管理简单任务或工作流而存在多个应用程序。</span><span class="sxs-lookup"><span data-stu-id="3c841-140">**Line-of-business apps** — Many apps exist for managing simple tasks or workflows.</span></span> <span data-ttu-id="3c841-141">为您的应用程序访问每个单独的工作流创建一 个活动。</span><span class="sxs-lookup"><span data-stu-id="3c841-141">Create one activity for each separate workflow accessed through your app.</span></span> <span data-ttu-id="3c841-142">例如，每个零用金报销单应为单独的活动，因为您可能希望单击以查看活动是否已获批准。</span><span class="sxs-lookup"><span data-stu-id="3c841-142">For example, each expense report would be a separate activity, because you might want to click that activity to see if it was approved.</span></span>

<span data-ttu-id="3c841-143">*某些复杂的应用程序包括多个交互模式。您可能需要针对应用程序处理的不同方案而应用不同的用户活动创建模式。*</span><span class="sxs-lookup"><span data-stu-id="3c841-143">*Some complex apps include multiple interaction patterns. You might want to follow different user activity creation patterns for different scenarios handled by your app.*</span></span>

<!-- Add content or remove H2.
## Common use cases 
-->

## <a name="next-steps"></a><span data-ttu-id="3c841-144">后续步骤</span><span class="sxs-lookup"><span data-stu-id="3c841-144">Next steps</span></span>

- <span data-ttu-id="3c841-145">请参阅 [活动资源](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity)，并定义您的应用程序的活动，以帮助用户继续重要任务。</span><span class="sxs-lookup"><span data-stu-id="3c841-145">See the [activity resource](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) and define your app's activities to help users resume important tasks.</span></span>
- <span data-ttu-id="3c841-146">浏览[自适应卡示例](http://adaptivecards.io/samples/)，以使您的活动**吸引用户**。</span><span class="sxs-lookup"><span data-stu-id="3c841-146">Explore the [adaptive card samples](http://adaptivecards.io/samples/) samples for ideas to make your activities **pop**.</span></span>  
- <span data-ttu-id="3c841-147">尝试 [Graph 浏览器](https://developer.microsoft.com/en-us/graph/graph-explorer)中的 API。</span><span class="sxs-lookup"><span data-stu-id="3c841-147">Try the API in the [Graph Explorer](https://developer.microsoft.com/en-us/graph/graph-explorer).</span></span>

<span data-ttu-id="3c841-148">**寻找相关详细信息？**</span><span class="sxs-lookup"><span data-stu-id="3c841-148">**Looking for more ideas?**</span></span> 
- <span data-ttu-id="3c841-149">请参阅 [Microsoft 的体验如何使用活动](https://channel9.msdn.com/events/Build/2017/B8108)。</span><span class="sxs-lookup"><span data-stu-id="3c841-149">See [how Microsoft experiences are using activities](https://channel9.msdn.com/events/Build/2017/B8108).</span></span>
- <span data-ttu-id="3c841-150">了解[活动源 API 和恢复中断的操作](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011)。</span><span class="sxs-lookup"><span data-stu-id="3c841-150">Learn about [the activity feed API and pick up where I left off](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).</span></span>
