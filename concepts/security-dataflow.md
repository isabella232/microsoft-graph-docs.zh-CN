# <a name="microsoft-graph-security-data-flow"></a><span data-ttu-id="e61bf-101">Microsoft Graph Security 数据流</span><span class="sxs-lookup"><span data-stu-id="e61bf-101">Microsoft Graph Security data flow</span></span>

<span data-ttu-id="e61bf-102">Microsoft Graph Security API 建立联盟与 Microsoft Graph Security 生态系统中的所有提供商的请求。</span><span class="sxs-lookup"><span data-stu-id="e61bf-102">The Microsoft Graph Security API federates requests to all providers in the Microsoft Graph Security ecosystem.</span></span> <span data-ttu-id="e61bf-103">这基于应用程序提供的安全提供程序同意，如下图所示。</span><span class="sxs-lookup"><span data-stu-id="e61bf-103">This is based on the security provider consent provided by the application, as shown in the following diagram.</span></span> <span data-ttu-id="e61bf-104">同意工作流仅适用于非 Microsoft 提供程序。</span><span class="sxs-lookup"><span data-stu-id="e61bf-104">The consent workflow only applies to non-Microsoft providers.</span></span>

![security_dataflow_1.png](./images/security_dataflow_1.png)

<span data-ttu-id="e61bf-106">以下是流程的说明：</span><span class="sxs-lookup"><span data-stu-id="e61bf-106">The following is a description of the flow:</span></span>

1. <span data-ttu-id="e61bf-107">应用程序用户登录到要查看从提供程序的同意窗体的提供程序应用程序。</span><span class="sxs-lookup"><span data-stu-id="e61bf-107">The application user signs in to the provider application to view the consent form from the provider.</span></span> <span data-ttu-id="e61bf-108">此同意表单体验或 UI 由提供程序拥有，仅适用于非 Microsoft 提供程序，以从客户那里获得发送请求给 Microsoft Graph Security API 的明确同意。</span><span class="sxs-lookup"><span data-stu-id="e61bf-108">This consent form experience or UI is owned by the provider and applies to non-Microsoft providers only to get explicit consent from their customers to send requests to Microsoft Graph Security API.</span></span>
2. <span data-ttu-id="e61bf-109">客户端同意存储在提供程序侧。</span><span class="sxs-lookup"><span data-stu-id="e61bf-109">The client consent is stored on the provider side.</span></span>
3. <span data-ttu-id="e61bf-110">提供程序 consent 服务调用 Microsoft Graph Security API，告知各自客户同意审批。</span><span class="sxs-lookup"><span data-stu-id="e61bf-110">The provider consent service calls the Microsoft Graph security API to inform consent approval for the respective customer.</span></span>
4. <span data-ttu-id="e61bf-111">应用程序将请求发送到 Microsoft Graph Security API。</span><span class="sxs-lookup"><span data-stu-id="e61bf-111">The application sends a request to the Microsoft Graph security API.</span></span>
5. <span data-ttu-id="e61bf-112">Microsoft Graph Security API 检查映射到不同提供程序的此客户同意信息。</span><span class="sxs-lookup"><span data-stu-id="e61bf-112">The Microsoft Graph Security API checks for the consent information for this customer mapped to various providers.</span></span>
6. <span data-ttu-id="e61bf-113">Microsoft Graph Security API 调用客户通过提供程序同意体验提供明确同意的所有这些提供程序。</span><span class="sxs-lookup"><span data-stu-id="e61bf-113">The Microsoft Graph Security API calls all those providers the customer has given explicit consent to via the provider consent experience.</span></span>
7. <span data-ttu-id="e61bf-114">响应从该客户端的所有已同意提供程序返回。</span><span class="sxs-lookup"><span data-stu-id="e61bf-114">The response is returned from all the consented providers for that client.</span></span>
8. <span data-ttu-id="e61bf-115">结果集响应返回到应用程序。</span><span class="sxs-lookup"><span data-stu-id="e61bf-115">The result set response is returned to the application.</span></span>
9. <span data-ttu-id="e61bf-116">如果客户未同意任何提供程序，则响应不包含这些提供程序的任何结果。</span><span class="sxs-lookup"><span data-stu-id="e61bf-116">If the customer has not consented to any provider, no results from those providers are included in the response.</span></span>
